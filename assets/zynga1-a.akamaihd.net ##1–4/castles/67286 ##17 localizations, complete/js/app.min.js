function bind(b,c){var a=$.makeArray(arguments).slice(2);return function(){return b.apply(c,a.concat($.makeArray(arguments)))}}function redirect(a){window.location=ZY.PrepareURL(a)}function ZY(c,a,b){this.params=c;this.updateUrl=a;ZY.instance=this;setInterval(bind(this.updateParams,this),b*1000);$(bind(this.registerClickHandler,this))}ZY.PrepareURL=function(a){if(ZY.instance&&ZY.instance.shouldAddSig(a)){return ZY.instance.prepareUrl(a)}else{return a}};ZY.prototype={updateParams:function(){$.post(this.prepareUrl(this.updateUrl),bind(this.updateSuccess,this),"json")},updateSuccess:function(a){this.params=a;document.getElementById("flashapp").updateZyParams(a)},registerClickHandler:function(){$("body").click(bind(this.click,this))},click:function(a){if(a.target){if(a.target.nodeName=="A"){return this.hrefClick(a)}else{if(a.target.nodeName=="INPUT"){return this.inputClick(a)}}}},hrefClick:function(b){var a=$(b.target);if(a&&this.shouldAddSig(a.attr("href"))){a.attr("href",this.prepareUrl(a.attr("href")))}},inputClick:function(d){var b=$(d.target);if(b&&b.attr("type")=="submit"){var c=b.closest("form");if(c.size()>0){for(var a in this.params){$("<input>",{type:"hidden",name:a,value:this.params[a]}).appendTo(c)}}}},shouldAddSig:function(a){var b="^"+window.location.toString().match(/https?:\/\/[^\/]*/)[0];return !a.match(/^#/)&&(!a.match(/^http/)||a.match(new RegExp(b)))},prepareUrl:function(a){if(a.indexOf("?")==-1){a+="?"}for(var b in this.params){a=a.replace(new RegExp(b+"=[^&]*&?"),"");a+="&"+b+"="+encodeURI(this.params[b])}return a}};function SKUpdater(a,b){b=b<0?0:b;this.url=a;this.iframe=this.createIframe();this.refreshIn(b);SKUpdater.instance=this}SKUpdater.prototype={createIframe:function(){var a=$("<iframe></iframe>");$("<div></div>",{id:"skUpdater"}).prependTo($("body")).append(a);return a},updateSK:function(){this.iframe&&this.iframe.attr("src",ZY.PrepareURL(this.getCacheBustedUrl()))},getCacheBustedUrl:function(){var a=(new Date())-0;if(this.url.indexOf("?")==-1){return this.url+"?"+a}else{return this.url+"&"+a}},refreshIn:function(a){setTimeout(bind(this.updateSK,this),a*1000)}};