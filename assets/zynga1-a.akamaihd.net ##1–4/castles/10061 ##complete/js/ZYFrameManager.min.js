(function(){var l=function(L){return ZY.PrepareURL(L)+"&overlayed=true&"+(new Date()-0)+"#overlay"};var t,u,I,f,h,C,g,d,z={},j;var b=function(){C.remove();if(j){y(j);j=null}};var o=function(M){if(M&&M.target){var L=$(M.target);if(!L.is("a")){L=L.parents("a")}A(L.attr("href"));g.children("a").parent().removeClass("selected");L.parent().addClass("selected");return false}};var D=function(L){$("#tabs li."+L+" > a").trigger("click")};var s=function(){return $("<iframe/>",{scrolling:"no",border:"0",frameborder:"0",height:"0"})};var p=function(){t=$("#appFrame");u=$("#flashFrame");I=$("#loadingFrame");f=$("#htmlFrame");d=$("#flashTab")};$(function(){g=$("#tabs li");g.children("a").not(".skipZyParams").click(o);$("#z_lang_button").click(K);p()});var i=function(){window.location.hash="#notOnFlash";u.addClass("offscreen")};var c=function(){$("#languageMenuOverlay").hide();$("#z_lang").unbind("mouseleave");$("#z_lang").unbind("mouseenter");$("#z_lang_button").unbind("mouseleave")};var q=false;var H=function(){q=true;setTimeout(function(){if(q){c()}},500)};var K=function(){if(!$("#appFrame").hasClass("flashVisible")){G();$("#languageMenuOverlay").show();return}if($("#languageMenuOverlay").is(":visible")){c()}else{$("#languageMenuOverlay").show();$("#z_lang").bind("mouseenter",function(){q=false});$("#z_lang_button").bind("mouseleave",H);$("#z_lang").bind("mouseleave",H)}};var F=function(){f.addClass("offscreen")};var x=function(){I.addClass("offscreen")};var r=function(){x();i();f.removeClass("offscreen");t.removeClass("flashVisible")};var m=function(){F();i();I.show();I.removeClass("offscreen");t.removeClass("flashVisible")};var e=function(){F();x();u.removeClass("offscreen");u.show();t.addClass("flashVisible");C=h;h=false;g.children("a").parent().removeClass("selected");d.addClass("selected");setTimeout(b,1000)};var a,n,v;var E=function(O){var L=O.body,N=O.documentElement;var M=Math.max(Math.max(L.offsetHeight,L.scrollHeight)+L.offsetTop,Math.max(N.offsetHeight,N.scrollHeight)+N.offsetTop);if(N.clientTop>0){M+=(N.clientTop*2)}return M};var w=function(){try{if(h==null||(h[0].contentWindow&&h[0].contentWindow.location.hash=="#switchToFlash")){e();clearInterval(a);a=null;h[0].contentWindow.location.hash="#switched"}else{if(!n||v==null||v==0){n=h[0].contentWindow.document}var L=E(n);if(L!=v){h.height(L);v=L}}}catch(M){}};var J=function(){h&&h.unbind("ready",J);r()};var A=function(L){if(L.match(/^#switchToFlash/)){G();return}p();if(z[L]){if(h){C=h;b()}h=z[L];j=L;z[L]=null;h.attr("height","").removeClass("preloaded");J()}else{m();if(!h){h=s().appendTo(f)}h.ready(J);h.attr("src",l(L))}n=null;v=0;a=setInterval(w,500)};var G=function(){a&&clearInterval(a);a=null;e()};var k=[];var y=function(M){var L=function(){var N=s();N.addClass("preloaded").attr("src",l(M)).appendTo(f).load(function(){z[M]=N})};k.push(L)};var B=function(){p();var L=k;k=[];setTimeout(function(){for(var M=0;M<L.length;++M){L[M]()}},5000)};window.ZYFrameManager={navigateTo:A,simulateTabClick:D,switchToFlash:G,openIFrame:A,preloadUrl:y,readyToPreload:B}})();