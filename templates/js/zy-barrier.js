(function(){if(typeof ZY=="undefined")ZY={};else if(ZY.Barrier)return;ZY.Barrier=function(){function d(a){for(var b=a.length;--b>=0;)if(!e[a[b]])return false;return true}var e={},c=[];this.done=function(a){var b;e[a]=true;for(a=c.length;--a>=0;){b=c[a];if(d(b[0])){b=b[1];c.splice(a,1);window.setTimeout(b,0)}}};this.once=function(a,b){if(typeof a=="string")a=[a];d(a)?b():c.unshift([a,b])}};var f=new ZY.Barrier;ZY.Barrier.done=f.done;ZY.Barrier.once=f.once})();