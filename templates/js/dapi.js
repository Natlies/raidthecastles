function _loadDAPIUIDepedencies(){function a(){ZCOM.Loader.fire("DAPI_IFPC_INIT"),typeof JSON=="undefined"?require({context:"dapi"},["lib/json2"],function(){ZCOM.Loader.fire("LIB_JSON_LOAD")}):ZCOM.Loader.fire("LIB_JSON_LOAD")}typeof ZCOM.Ifpc=="undefined"?require({context:"dapi"},["common/ifpc/ifpc"],function(){a()}):a()}typeof window.DAPI=="undefined"&&(window.DAPI={}),define("def",function(){}),typeof window.ZCOM=="undefined"&&(window.ZCOM={});if(typeof ZCOM.Loader!="undefined")throw"Attempting to import ZCOM.Loader twice";ZCOM.Loader=function(){function i(b){b?delete a[b]:a={}}function h(b){return a[b]}function g(d,e){e||(a[d]=!0);while(c[d]&&c[d].length>0){var f=c[d].pop(),g=b[f][0],h=b[f][1],i=[];while(g.length>0){var j=g.pop();j!=d&&i.push(j)}i.length>0?b[f]=[i,h]:(delete b[f],setTimeout(h,0))}delete c[d]}function f(a){if(!b[a])return null;var d=b[a][0];while(d.length>0){var e=d.pop(),f=[];while(c[e]&&c[e].length>0){var g=c[e].pop();g!=a&&f.push(g)}f.length>0?c[e]=f:delete c[e]}var h=b[a][1];delete b[a];return h}function e(e,f){var g=[],h=d++;while(e.length>0){var i=e.pop();a[i]||(g.push(i),c[i]||(c[i]=[]),c[i].push(h))}if(g.length>0){b[h]=[g,f];return h}setTimeout(f,0);return-1}var a={},b={},c={},d=0;return{wait:e,terminate:f,fire:g,isFired:h,clear:i}}(),define("common/loader",function(){}),(typeof Crypto=="undefined"||!Crypto.util)&&function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=window.Crypto={},c=b.util={rotl:function(a,b){return a<<b|a>>>32-b},rotr:function(a,b){return a<<32-b|a>>>b},endian:function(a){if(a.constructor==Number)return c.rotl(a,8)&16711935|c.rotl(a,24)&4278255360;for(var b=0;b<a.length;b++)a[b]=c.endian(a[b]);return a},randomBytes:function(a){for(var b=[];a>0;a--)b.push(Math.floor(Math.random()*256));return b},bytesToWords:function(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b},wordsToBytes:function(a){for(var b=[],c=0;c<a.length*32;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b},bytesToHex:function(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((a[c]&15).toString(16));return b.join("")},hexToBytes:function(a){for(var b=[],c=0;c<a.length;c+=2)b.push(parseInt(a.substr(c,2),16));return b},bytesToBase64:function(b){if(typeof btoa=="function")return btoa(f.bytesToString(b));for(var c=[],d=0;d<b.length;d+=3){var e=b[d]<<16|b[d+1]<<8|b[d+2];for(var g=0;g<4;g++)d*8+g*6<=b.length*8?c.push(a.charAt(e>>>6*(3-g)&63)):c.push("=")}return c.join("")},base64ToBytes:function(b){if(typeof atob=="function")return f.stringToBytes(atob(b));b=b.replace(/[^A-Z0-9+\/]/ig,"");for(var c=[],d=0,e=0;d<b.length;e=++d%4){if(e==0)continue;c.push((a.indexOf(b.charAt(d-1))&Math.pow(2,-2*e+8)-1)<<e*2|a.indexOf(b.charAt(d))>>>6-e*2)}return c}};b.mode={};var d=b.charenc={},e=d.UTF8={stringToBytes:function(a){return f.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(f.bytesToString(a)))}},f=d.Binary={stringToBytes:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c));return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}}}(),function(){var a=Crypto,b=a.util,c=a.charenc,d=c.UTF8,e=c.Binary,f=a.MD5=function(a,c){var d=b.wordsToBytes(f._md5(a));return c&&c.asBytes?d:c&&c.asString?e.bytesToString(d):b.bytesToHex(d)};f._md5=function(a){a.constructor==String&&(a=d.stringToBytes(a));var c=b.bytesToWords(a),e=a.length*8,g=1732584193,h=-271733879,i=-1732584194,j=271733878;for(var k=0;k<c.length;k++)c[k]=(c[k]<<8|c[k]>>>24)&16711935|(c[k]<<24|c[k]>>>8)&4278255360;c[e>>>5]|=128<<e%32,c[(e+64>>>9<<4)+14]=e;var l=f._ff,m=f._gg,n=f._hh,o=f._ii;for(var k=0;k<c.length;k+=16){var p=g,q=h,r=i,s=j;g=l(g,h,i,j,c[k+0],7,-680876936),j=l(j,g,h,i,c[k+1],12,-389564586),i=l(i,j,g,h,c[k+2],17,606105819),h=l(h,i,j,g,c[k+3],22,-1044525330),g=l(g,h,i,j,c[k+4],7,-176418897),j=l(j,g,h,i,c[k+5],12,1200080426),i=l(i,j,g,h,c[k+6],17,-1473231341),h=l(h,i,j,g,c[k+7],22,-45705983),g=l(g,h,i,j,c[k+8],7,1770035416),j=l(j,g,h,i,c[k+9],12,-1958414417),i=l(i,j,g,h,c[k+10],17,-42063),h=l(h,i,j,g,c[k+11],22,-1990404162),g=l(g,h,i,j,c[k+12],7,1804603682),j=l(j,g,h,i,c[k+13],12,-40341101),i=l(i,j,g,h,c[k+14],17,-1502002290),h=l(h,i,j,g,c[k+15],22,1236535329),g=m(g,h,i,j,c[k+1],5,-165796510),j=m(j,g,h,i,c[k+6],9,-1069501632),i=m(i,j,g,h,c[k+11],14,643717713),h=m(h,i,j,g,c[k+0],20,-373897302),g=m(g,h,i,j,c[k+5],5,-701558691),j=m(j,g,h,i,c[k+10],9,38016083),i=m(i,j,g,h,c[k+15],14,-660478335),h=m(h,i,j,g,c[k+4],20,-405537848),g=m(g,h,i,j,c[k+9],5,568446438),j=m(j,g,h,i,c[k+14],9,-1019803690),i=m(i,j,g,h,c[k+3],14,-187363961),h=m(h,i,j,g,c[k+8],20,1163531501),g=m(g,h,i,j,c[k+13],5,-1444681467),j=m(j,g,h,i,c[k+2],9,-51403784),i=m(i,j,g,h,c[k+7],14,1735328473),h=m(h,i,j,g,c[k+12],20,-1926607734),g=n(g,h,i,j,c[k+5],4,-378558),j=n(j,g,h,i,c[k+8],11,-2022574463),i=n(i,j,g,h,c[k+11],16,1839030562),h=n(h,i,j,g,c[k+14],23,-35309556),g=n(g,h,i,j,c[k+1],4,-1530992060),j=n(j,g,h,i,c[k+4],11,1272893353),i=n(i,j,g,h,c[k+7],16,-155497632),h=n(h,i,j,g,c[k+10],23,-1094730640),g=n(g,h,i,j,c[k+13],4,681279174),j=n(j,g,h,i,c[k+0],11,-358537222),i=n(i,j,g,h,c[k+3],16,-722521979),h=n(h,i,j,g,c[k+6],23,76029189),g=n(g,h,i,j,c[k+9],4,-640364487),j=n(j,g,h,i,c[k+12],11,-421815835),i=n(i,j,g,h,c[k+15],16,530742520),h=n(h,i,j,g,c[k+2],23,-995338651),g=o(g,h,i,j,c[k+0],6,-198630844),j=o(j,g,h,i,c[k+7],10,1126891415),i=o(i,j,g,h,c[k+14],15,-1416354905),h=o(h,i,j,g,c[k+5],21,-57434055),g=o(g,h,i,j,c[k+12],6,1700485571),j=o(j,g,h,i,c[k+3],10,-1894986606),i=o(i,j,g,h,c[k+10],15,-1051523),h=o(h,i,j,g,c[k+1],21,-2054922799),g=o(g,h,i,j,c[k+8],6,1873313359),j=o(j,g,h,i,c[k+15],10,-30611744),i=o(i,j,g,h,c[k+6],15,-1560198380),h=o(h,i,j,g,c[k+13],21,1309151649),g=o(g,h,i,j,c[k+4],6,-145523070),j=o(j,g,h,i,c[k+11],10,-1120210379),i=o(i,j,g,h,c[k+2],15,718787259),h=o(h,i,j,g,c[k+9],21,-343485551),g=g+p>>>0,h=h+q>>>0,i=i+r>>>0,j=j+s>>>0}return b.endian([g,h,i,j])},f._ff=function(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},f._gg=function(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},f._hh=function(a,b,c,d,e,f,g){var h=a+(b^c^d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},f._ii=function(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+(e>>>0)+g;return(h<<f|h>>>32-f)+b},f._blocksize=16}(),function(){var a=Crypto,b=a.util,c=a.charenc,d=c.UTF8,e=c.Binary,f=a.SHA1=function(a,c){var d=b.wordsToBytes(f._sha1(a));return c&&c.asBytes?d:c&&c.asString?e.bytesToString(d):b.bytesToHex(d)};f._sha1=function(a){a.constructor==String&&(a=d.stringToBytes(a));var c=b.bytesToWords(a),e=a.length*8,f=[],g=1732584193,h=-271733879,i=-1732584194,j=271733878,k=-1009589776;c[e>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+15]=e;for(var l=0;l<c.length;l+=16){var m=g,n=h,o=i,p=j,q=k;for(var r=0;r<80;r++){if(r<16)f[r]=c[l+r];else{var s=f[r-3]^f[r-8]^f[r-14]^f[r-16];f[r]=s<<1|s>>>31}var t=(g<<5|g>>>27)+k+(f[r]>>>0)+(r<20?(h&i|~h&j)+1518500249:r<40?(h^i^j)+1859775393:r<60?(h&i|h&j|i&j)-1894007588:(h^i^j)-899497514);k=j,j=i,i=h<<30|h>>>2,h=g,g=t}g+=m,h+=n,i+=o,j+=p,k+=q}return[g,h,i,j,k]},f._blocksize=16}(),define("lib/cryptojs/cryptojs",function(){});var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g;return e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}(),define("lib/json2",function(){}),typeof window.ZCOM=="undefined"&&(window.ZCOM={});if(typeof ZCOM.Cache!="undefined")throw"Attempting to import ZCOM.Cache twice";ZCOM.Cache=function(){function f(a){if(!a){b=b?b:e("default");return b}return e(a)}function e(b){function j(){var a=[];for(var b in e)e.hasOwnProperty(b)&&a.push(b);return a}function i(a){a?delete e[a]:h()}function h(){e={}}function g(a){return c(e[a])?null:e[a].substring(10)}function f(b,c,f){f=f||a,c=d(f)+""+c,e[b]=c}var e={};return{set:f,get:g,remove:i,keys:j}}function d(a){return Math.round((new Date).getTime()/1e3+a)}function c(a){return!a||parseInt(a.substring(0,10),10)<(new Date).getTime()/1e3}var a=1800,b=null;return f}(),define("common/cache",function(){});if(typeof window.DAPI=="undefined")throw"Attempted to import DAPI.Cache without DAPI already defined";if(typeof DAPI.Cache!="undefined")throw"Attempted to import DAPI.cache twice";DAPI.Cache=function(a){function r(){return a.isTop()||typeof window.parent.DAPI=="undefined"||typeof window.parent.DAPI.Cache=="undefined"?p:q}function o(a,e,f){b||(b=!0,typeof Crypto=="undefined"||typeof Crypto.MD5=="undefined"?require({context:"dapi"},["lib/cryptojs/cryptojs"],function(){ZCOM.Loader.fire("LIB_CRYPTOJS_LOAD")}):ZCOM.Loader.fire("LIB_CRYPTOJS_LOAD"),typeof JSON=="undefined"?require({context:"dapi"},["lib/json2"],function(){ZCOM.Loader.fire("LIB_JSON_LOAD")}):ZCOM.Loader.fire("LIB_JSON_LOAD"),typeof ZCOM.Cache=="undefined"?require({context:"dapi"},["common/cache"],function(){ZCOM.Loader.fire("ZCOM_CACHE_LOAD")}):ZCOM.Loader.fire("ZCOM_CACHE_LOAD"),ZCOM.Loader.wait(["LIB_JSON_LOAD","LIB_CRYPTOJS_LOAD","ZCOM_CACHE_LOAD"],function(){d=a||"default",d="zstore_"+Crypto.MD5(d),h(d),c=ZCOM.Cache(d),ZCOM.Loader.fire("DAPI_CACHE_INIT")}))}function n(){if(c)return c.keys()}function m(a,b){var d="";if(c){if(typeof b!="undefined"&&typeof a!="undefined"){d=Crypto.MD5(a+b),c.remove(d);return}c.remove()}}function l(){return Persist.type}function k(a,b){var d="";if(c){d=Crypto.MD5(a+b);var e=c.get(d);return e?JSON.parse(e):null}throw"Cache has to be initialized or created before you fetch"}function j(a,b,d,e){var f="";if(c)d=JSON.stringify(d),f=Crypto.MD5(a+b),c.set(f,d,e);else throw"Cache has to be initialized or created before you store"}function i(){return c}function h(a){function m(a,c){i=g.get(a);if(i!==null&&i!==""&&typeof i!="undefined"&&j(i)){var d=ZCOM.Cache(a);d.remove(),b=b.splice(c,1),g.remove(a)}}function l(a){return Math.round((new Date).getTime()/1e3+a)}function k(a,b){var c=!1;for(var d=0;d<b.length;d++)if(b.hasOwnProperty(d)&&b[d]==a){c=!0;break}return d==b.length&&!c}function j(a){return!a||parseInt(a.substring(0,10),10)<(new Date).getTime()/1e3}var b=[],c=0,d=null,h=null,i=null;g=ZCOM.Cache(e);if(g){i=g.keys();if(i===null||i===""||typeof i=="undefined"){h=l(f),g.set(a,h,h);return}b=i,k(a,b)&&(b.push(a),h=l(f),g.set(a,h,h));for(var n=0;n<b.length;++n)m(b[n],n)}return!0}var b=!1,c=null,d="",e="dapiCacheOfCaches",f=18e3,g=null,p={init:o,get:k,set:j,handle:i,getType:l,remove:m,keys:n},q={init:function(a,b,c){window.parent.ZCOM.Loader.wait(["DAPI_CACHE_INIT"],function(){ZCOM.Loader.fire("DAPI_CACHE_INIT")});return window.parent.DAPI.Cache.init(a,b,c)},get:function(a,b){return window.parent.DAPI.Cache.get(a,b)},set:function(a,b,c,d){return window.parent.DAPI.Cache.set(a,b,c,d)},handle:function(){return window.parent.DAPI.Cache.handle()},getType:function(){return window.parent.DAPI.Cache.getType()},remove:function(a,b){return window.parent.DAPI.Cache.remove(a,b)},keys:function(){return window.parent.DAPI.Cache.keys()}},s={init:function(a,b,c){var d=r();return d.init(a,b,c)},get:function(a,b){var c=r();return c.get(a,b)},set:function(a,b,c,d){var e=r();return e.set(a,b,c,d)},handle:function(){var a=r();return a.handle()},getType:function(){var a=r();return a.getType()},remove:function(a,b){var c=r();return c.remove(a,b)},keys:function(){var a=r();return a.keys()}};return s}(DAPI),define("cache",function(){}),typeof window.ZCOM=="undefined"&&(window.ZCOM={});if(typeof ZCOM.Ifpc!="undefined")throw"Attempting to import ZCOM.Ifpc twice";if(typeof window.console=="undefined")var console={log:function(){},warn:function(){}};ZCOM.Ifpc=function(){function Y(){for(var a in k)k.hasOwnProperty(a)&&(j[a]=k[a]);h=!1,k={},l=[],m=0,n={},o={},p={},q={},r={},t=[],u=[],s=function(a){return!0},"undefined"!=typeof ZCOM.Loader&&ZCOM.Loader.clear("ZCOM_IFPC_INIT")}function X(a){if(!h){a=a?a:{};var b=a.modulePriority?a.modulePriority:i.slice(),c;for(c in j)j.hasOwnProperty(c)&&(-1!==b.indexOf(c)?j[c].init(a[c])?l.push(c):k[c]={module:j[c],reason:"Not supported in this environment"}:k[c]={module:j[c],reason:"Not found in priority list"});for(c in k)k.hasOwnProperty(c)&&delete j[c];a.hasOwnProperty("connectedCallback")&&typeof a.connectedCallback=="function"&&(s=a.connectedCallback),window!=window.parent&&(n.parent=n[G({framePath:"parent"})]),a.hasOwnProperty("defaultTarget")?n["default"]=n[G(a.defaultTarget)]:window!=window.parent&&(n["default"]=n.parent),D("zcom.ifpc.query",T),D("zcom.ifpc.response",U),D("zcom.ifpc.connect",Q),D("zcom.ifpc.connected",R),D("zcom.ifpc.listening",S),"undefined"!=typeof ZCOM.Loader&&ZCOM.Loader.fire("ZCOM_IFPC_INIT"),h=!0}}function W(a){V(a,this);var b=function(b){return function(){throw"Module "+a+"."+b+"() not defined"}},c=["init","params","supports","memo","send"];for(var d=0;d<c.length;++d)this[c[d]]=b(c[d])}function V(a,b){ZCOM.Ifpc[a]=j[a]=b,i.push(a)}function U(a){a=e(a),a.id=parseInt(a.id,10),q.hasOwnProperty(a.id)&&(q[a.id].callback(e(a.data)),clearTimeout(q[a.id].timeout),delete q[a.id])}function T(a){a=e(a),a.connectionId=parseInt(a.connectionId,10);var b,c;c=r[a.connectionId];try{N(a.methodName,a.dataString,c?c.connectionId:0,function(b){a.methodName==="zcom.ifpc.connect"&&(c=r[e(b[0]).connectionId]),"undefined"!=typeof c&&I(c.id,"zcom.ifpc.response",d({id:a.id,data:d({status:"success",data:b[0]})}))})}catch(f){"undefined"!=typeof c&&I(c.id,"zcom.ifpc.response",d({id:a.id,data:d({status:"error",data:f.toString()})}))}}function S(a,b){var c=[];for(var d in o)o.hasOwnProperty(d)&&c.push(d);return c.join(",")}function R(a,b){r.hasOwnProperty(b.connectionId)&&z(b)}function Q(a){a=e(a),a.create=e(a.create),a.create.accepts=a.create.accepts.split(","),a.create.framePath=a.create.framePath.split(" "),a.create.connectionId=parseInt(a.create.connectionId,10);var b,c,g,h,i;g=new F(a.create);for(b=0;b<l.length;++b){h=l[b];if(-1!==g.accepts.hasOwnProperty(h)&&j[h].supports(g)){n[g.id]=g;if(!s(g)){delete n[g.id];return{status:"error",data:"Connection rejected by target frame"}}for(c in n)n.hasOwnProperty(c)&&n[c].win==g.win&&(n[c]=g);r[g.connectionId=++m]=g,i={status:"success",connectionId:g.connectionId.toString(),create:{accepts:[],framePath:f().join(" ")}};for(c=0;c<l.length;++c)-1!==g.accepts.indexOf(l[c])&&(i.create.accepts.push(l[c]),i.create[l[c]]=d(j[l[c]].memo()));i.create.accepts=i.create.accepts.join(","),i.create=d(i.create);return d(i)}}return d({status:"error",data:"No supported modules in accept list"})}function P(a,b){O("default",a,b)}function O(a,b,c){b=typeof b=="function"?b:function(){};var g=A(a);if("undefined"==typeof g)b({status:"error",data:"No target with id "+a});else{if(g.hasOwnProperty("connectionId")){0!==g.remoteConnectionId?(z(g),b({status:"success",data:""})):b({status:"error",data:"Request for connection already sent"});return}g.connectionId=++m;var h={create:{accepts:[],framePath:f().join(" "),connectionId:g.connectionId.toString()}};for(var i=0;i<l.length;++i)h.create.accepts.push(l[i]),h.create[l[i]]=d(j[l[i]].memo());h.create.accepts=h.create.accepts.join(","),h.create=d(h.create),h=d(h),K(g.id,"zcom.ifpc.connect",h,function(a){if(a.status==="success"){var c=e(a.data);c.status==="success"?(r[g.connectionId]=g,g.remoteConnectionId=parseInt(c.connectionId,10),I(g.id,"zcom.ifpc.connected",d({})),z(g),b({status:"success",data:""})):(delete g.connectionId,b(c))}else delete g.connectionId,b(a)},c)}}function N(a,b,c,d){var e=o[a],f,g=r[c],h=[],i,j=0;if("undefined"!=typeof e){i=e.length;var k=function(a,b){h[a]=b,i===++j&&d(h)};for(f=0;f<i;++f)h.push(null);var l=function(a,c){return c.async?function(){c.callback(b,g,function(b){k(a,b)})}:function(){k(a,c.callback(b,g))}};for(f=0;f<i;++f)p.hasOwnProperty(e[f])&&setTimeout(l(f,p[e[f]]),0)}else d([])}function M(a,b,c){var d=o[a],e,f=r[c],g=function(a){return function(){a.callback(b,f)}};if("undefined"!=typeof d)for(e=0;e<d.length;++e)p.hasOwnProperty(d[e])&&setTimeout(g(p[d[e]]),0)}function L(a,b,c,d){c=typeof c=="function"?c:function(){},K("default",a,b,c,d)}function K(a,b,c,e,f){e=typeof e=="function"?e:function(){},f="undefined"!=typeof f?f:3e4;var g=A(a);if("undefined"==typeof g)e({status:"error",data:"No target found for id "+a});else{if(!g.hasOwnProperty("connectionId")||b!=="zcom.ifpc.connect"&&0===g.remoteConnectionId){e({status:"error",data:"Target has not been connected yet"+a});return}var h=++m;q[h]={callback:e,timeout:setTimeout(function(){delete q[h],e({status:"error",data:"timed out"})},f)},I(g.id,"zcom.ifpc.query",d({id:h.toString(),connectionId:g.remoteConnectionId.toString(),methodName:b,dataString:c}))}}function J(a,b){return I("default",a,b)}function I(a,b,c){c=c?c:"";var d=A(a);if("undefined"!=typeof d){for(var e=0;e<l.length;++e)if(-1!==d.accepts.indexOf(l[e])&&j.hasOwnProperty(l[e])&&j[l[e]].supports(d))return j[l[e]].send(d,b,c);console.warn("No modules found to send message '"+b+"' for target '"+d.id+"': "+c),console.warn("Disabled modules:"),console.warn(k)}else console.warn("No target found for id "+a+" when sending '"+b+"' with "+c);return!1}function H(a){if(n.hasOwnProperty(a)){var b=n[a];delete n[a];return b}}function G(a){var b;for(b=0;b<l.length;++b)a.hasOwnProperty(l[b])&&(a[l[b]]=d(a[l[b]]));var c=new F(a);n[c.id]=c;for(b in n)n.hasOwnProperty(b)&&n[b].win==c.win&&(n[b]=c);y(c);return c.id}function F(a){var b;this.remoteConnectionId=a.hasOwnProperty("connectionId")?a.connectionId:0;if(a.accepts==="*"||"undefined"==typeof a.accepts)this.accepts=l.slice();else{this.accepts=[];for(b=0;b<a.accepts.length;++b)-1!==l.indexOf(a.accepts[b])&&this.accepts.push(a.accepts[b])}a.framePath=a.framePath||"parent",typeof a.framePath=="string"&&(a.framePath=a.framePath===""?[]:a.framePath.split(" ")),this.win=g(a.framePath);for(b=0;b<this.accepts.length;++b)this[this.accepts[b]]=j[this.accepts[b]].params(a);this.id="ifpc-target-"+ ++m,this.reject=function(a){var b=this.accepts.indexOf(a);-1!==b&&this.accepts.splice(b,1)},this.accept=function(a){var b=this.accepts.indexOf(a);-1===b&&this.accepts.push(a)}}function E(a){var b=p[a],c,d;if("undefined"!=typeof b){"undefined"!=typeof (c=o[b.methodName])&&-1!==(d=o.indexOf(a))&&o.splice(d,1),delete p[a];return!0}return!1}function D(a,b,c){b=typeof b=="function"?b:function(){};var d=++m;p[d]={methodName:a,callback:b,async:c?!0:!1},o.hasOwnProperty(a)||(o[a]=[]),o[a].push(d);return d}function C(a,b){var c=A(a);if("undefined"!=typeof c){n.parent=c;return!0}return!1}function B(a){var b=A(a);if("undefined"!=typeof b){n["default"]=b;return!0}return!1}function A(a){var b,c,d,e;(b=n[a])||(e=a,typeof e=="string"&&(e=e===""?[]:e.split(" ")),a=v(g(e)),"undefined"!=typeof a&&(b=n[a]));return b}function z(a){var b=[],c;for(c=0;c<u.length;)u[c][0]===a.win?b.push(u.splice(c,1)[0][1]):++c;if(0<b.length){var d=function(b){return function(){b(a.id)}};for(c=0;c<b.length;++c)setTimeout(d(b[c]),0)}}function y(a){var b=[],c;for(c=0;c<t.length;)t[c][0]===a.win?b.push(t.splice(c,1)[0][1]):++c;if(0<b.length){var d=function(b){return function(){b(a.id)}};for(c=0;c<b.length;++c)setTimeout(d(b[c]),0)}}function x(a,b){var c;b&&typeof b=="function"&&("undefined"!=typeof (c=v(a))&&n[c].hasOwnProperty("remoteConnectionId")&&0!==n[c].remoteConnectionId?b(c):u.push([a,b]))}function w(a,b){var c;b&&typeof b=="function"&&("undefined"!=typeof (c=v(a))?b(c):t.push([a,b]))}function v(a){if(a)for(var b in n)if(n.hasOwnProperty(b)&&"parent"!==b&&"default"!==b&&n[b].win==a)return b}function g(b,c){b=a(b)?b:[b];var d=c?c:window,e;for(e=0;e<b.length&&"undefined"!=typeof d;++e)d=d.frames[b[e]];return d}function f(a){a="undefined"!=typeof a?a:window;var b=[],c=a,d;while(c!=window.top)for(d=0;d<c.parent.frames.length;++d)if(c.parent.frames[d]==c){b.push(d),c=c.parent;break}b.push("top"),b.reverse();return b}function e(a){var b=c(a),d=b?b.split("^"):[],e={},f=null;for(var g=0;g<d.length;++g)f=d[g].split("$"),f[0]=c(f[0]),f[1]=c(f[1]),e[f[0]]=f[1];return e}function d(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(b(d)+"$"+b(a[d]));return b(c.join("^"))}function c(a){return(a||"").toString().replace(/~6/g,"^").replace(/~4/g,"$").replace(/~1/g,"~")}function b(a){return(a||"").toString().replace(/~/g,"~1").replace(/\$/g,"~4").replace(/\^/g,"~6")}function a(a){return Object.prototype.toString.apply(a)==="[object Array]"}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;++b)if(a===this[b])return b;return-1});var h=!1,i=[],j={},k={},l=[],m=0,n={},o={},p={},q={},r={},s=function(a){return!0},t=[],u=[];W.prototype={pack:d,unpack:e,dispatch:M,findFrame:g,findFramePath:f};return{Module:W,init:X,shutdown:Y,findFrame:g,findFramePath:f,onWindowAdded:w,onWindowConnected:x,addTarget:G,setDefaultTarget:B,setParentTarget:C,getTargetId:v,listen:D,ignore:E,send:J,sendToTarget:I,connect:P,connectToTarget:O,sendQuery:L,sendQueryToTarget:K,pack:d,unpack:e}}(),function(){var a=new ZCOM.Ifpc.Module("sameDomain");a.init=function(a){return!0},a.params=function(a){var b={};a.hasOwnProperty("framePath")&&(b.framePath=a.framePath);if(a.hasOwnProperty("sameDomain")){var c=this.unpack(a.sameDomain);for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])}return b},a.supports=function(a){try{var b=a.win.ZCOM.Ifpc.sameDomain;return!0}catch(c){}return!1},a.memo=function(){return{}},a.send=function(a,b,c){a.win.ZCOM.Ifpc.sameDomain.receive(b,c,a.remoteConnectionId);return!0},a.receive=function(a,b,c){this.dispatch(a,b,c)}}(),function(){var a=new ZCOM.Ifpc.Module("postMessage"),b="[com_zynga_ifpc]";a.init=function(c){try{if(!window.postMessage)return!1;var d=function(c){0===c.data.indexOf(b)&&a.receive(a.unpack(c.data.substr(b.length)))};if(window.addEventListener)window.addEventListener("message",d);else if(window.attachEvent)window.attachEvent("onmessage",d);else return!1}catch(e){return!1}return!0},a.params=function(a){var b={};a.hasOwnProperty("framePath")&&(b.framePath=a.framePath);if(a.hasOwnProperty("postMessage")){var c=this.unpack(a.postMessage);for(var d in c)"framePath"===d?b[d]=c[d].split(" "):b[d]=c[d]}return b},a.supports=function(a){return a.hasOwnProperty("win")},a.memo=function(){return{framePath:this.findFramePath().join(" "),origin:document.domain}},a.send=function(a,c,d){var e=a.origin,f;try{f={methodName:c,dataString:d,connectionId:a.remoteConnectionId.toString()},a.win.postMessage(b+this.pack(f),e?e:"*");return!0}catch(g){console.warn(g)}return!1},a.receive=function(a){this.dispatch(a.methodName,a.dataString,parseInt(a.connectionId,10))}}(),function(){function k(e,f){function o(){if(m==1)n();else{var a="";for(var b=0;b<m;++b)a=encodeURIComponent(j.pack({id:b.toString(),segment:g[b]})),navigator.userAgent.toLowerCase().indexOf("firefox")!=-1&&(a=encodeURIComponent(a)),i(e.subframes.xdReceiverUrl+"#"+a,c+b,n)}}function n(){return--m===0&&setTimeout(function(){h(b);for(var a=0;g.length>1&&a<g.length;++a)h(c+a);d.shift();try{d.length>0&&k.apply(j,d[0])}catch(e){console.warn(e)}},0)}var g=[];if(!window.ActiveXObject)g=[f];else{var l=0;while(l<f.length)g.push(f.slice(l,l+a)),l+=a}var m=-1;m=g.length;var p={version:e.subframes.version};"1"===p.version?p.target=e.subframes.hasOwnProperty("target")?e.subframes.target:"parent":p.target=j.findFramePath(e.win).join(" "),m==1?p.data=g[0]:p.counter=m;var q=encodeURIComponent(j.pack(p));navigator.userAgent.toLowerCase().indexOf("firefox")!=-1&&(q=encodeURIComponent(q)),i(e.subframes.xdReceiverUrl+"#"+q,b,o)}function i(a,b,c){c=c||function(){},h(b);var d=document.createElement("iframe");d.style.border=d.style.width=d.style.height="0px",d.style.visibility="hidden",d.style.position="absolute",d.src=a,d.name=b,d.id=b,d.attachEvent?d.attachEvent("onload",c):d.onload=c,document.body.appendChild(d),navigator.userAgent.toLowerCase().indexOf("firefox")!=-1&&(d.src=d.src);return d}function h(a){var b=document.getElementById(a);return b&&document.body.removeChild(b)}var a=1800,b="crossdomain_helper_collector",c="crossdomain_helper_data",d=[],e={},f=0,g,j=new ZCOM.Ifpc.Module("subframes");j.TAG_COLLECTOR=b,j.TAG_DATA=c,j.loadIframe=i,j.unloadIframe=h,j.init=function(a){typeof a=="object"&&(g=a.xdReceiverUrl);return!0},j.params=function(a){var b={version:"2"};a.hasOwnProperty("framePath")&&(b.framePath=a.framePath);if(a.hasOwnProperty("subframes")){var c=this.unpack(a.subframes);for(var d in c)c.hasOwnProperty(d)&&("framePath"===d?b[d]=c[d].split(" "):b[d]=c[d])}return b},j.supports=function(a){return a.win&&a.hasOwnProperty("subframes")&&a.subframes.xdReceiverUrl},j.memo=function(){return{framePath:this.findFramePath().join(" "),xdReceiverUrl:g}},j.send=function(a,b,c){var e;"1"===a.subframes.version?e=this.pack({methodName:b,args:c}):e=this.pack({methodName:b,dataString:c,connectionId:a.remoteConnectionId.toString()}),d.push([a,e]);return d.length===1&&k(a,e)},j.receive=function(a){var b=this.unpack(a);this.dispatch(b.methodName,b.dataString,parseInt(b.connectionId,10))},j.invoke=function(a,b){this.dispatch(a,b,0)}}(),define("common/ifpc/ifpc",function(){}),typeof window.ZCOM=="undefined"&&(window.ZCOM={});if(typeof ZCOM.Xhr!="undefined")throw"Attempting to import ZCOM.Xhr twice";if(typeof window.console=="undefined")var console={log:function(){}};ZCOM.Xhr=function(){function k(b,e,f,g,h,i,j){if(!a)i(null,"ZCOM XHR library is not initialized yet.");else{b=b.toUpperCase(),e=e||"",f=f||"",g=g||"",h=h||function(){},i=i||function(){};if(c==="HTML5"){var k=new XMLHttpRequest,l=null;k.open(b,e,!j),k.withCredentials=!0,b.toUpperCase()==="POST"&&k.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),k.onreadystatechange=function(){k.readyState==4&&(l&&clearTimeout(l),typeof k.status!="number"||!k.status?setTimeout(function(){i(0,"The HTTP connection is timed out.")},0):k.status==200?setTimeout(function(){h(k.responseText)},0):setTimeout(function(){i(k.status,k.statusText)},0))},k.send(f),l=setTimeout(function(){k.abort()},parseInt(g||"60",10)*1e3)}else ZCOM.Ifpc.sendQueryToTarget(d,"zcom.xhr.proxyRequest",ZCOM.Ifpc.pack({method:b,url:e,body:f,timeout:g,isSync:j?"true":"false"}),function(a){var b;"success"===a.status?0===a.data.length?i(0,"Proxy was not listening for your xhr request: zcom.xhr.proxyRequest"):(b=ZCOM.Ifpc.unpack(a.data),b.hasOwnProperty("responseText")?h(b.responseText):i(b.status,a.data.statusText)):i(0,a.data)},1e4)}}function j(){!a||(ZCOM.Ifpc.subframes.unloadIframe("xhr"),typeof ZCOM.Loader!="undefined"&&ZCOM.Loader.clear("ZCOM_XHR_INIT"))}function i(a,b,c,d,e){d=d||"",e=e||function(){};var f={"ZCOM.Ifpc":[typeof ZCOM.Ifpc=="undefined","common/ifpc/ifpc",!1],"ZCOM.Detect":[typeof ZCOM.Detect=="undefined","common/detect",!1]},g=[];for(var i in f)f.hasOwnProperty(i)&&f[i][0]&&(g.push(f[i][1]),f[i][2]=!0);if(g.length>0){if(typeof require=="undefined")return!1;require({context:"dapi"},g,function(){f["ZCOM.Ifpc"][2]&&(ZCOM.Loader.fire("ZCOM_IFPC_LOAD"),ZCOM.Ifpc.init({subframes:{xdReceiverUrl:d}})),h(a,b,c,d,e)});return!0}h(a,b,c,d,e);return!0}function h(b,e,f,h,i){if(ZCOM.Detect.browser==="MSIE"&&ZCOM.Detect.version>=8)c="MSIE";else if(ZCOM.Detect.browser==="Firefox"&&ZCOM.Detect.version>=3.5||ZCOM.Detect.browser==="Chrome"||ZCOM.Detect.browser==="Safari"&&ZCOM.Detect.version>=4)c="HTML5";c==="HTML5"?(a=!0,typeof ZCOM.Loader!="undefined"&&ZCOM.Loader.fire("ZCOM_XHR_INIT"),i&&setTimeout(i,0)):(g(b,e,f,h),ZCOM.Loader.wait(["ZCOM_IFPC_INIT"],function(){ZCOM.Ifpc.subframes.loadIframe(b,"xhr",function(){d=ZCOM.Ifpc.addTarget({framePath:"xhr",subframes:{xdReceiverUrl:e}}),ZCOM.Ifpc.connectToTarget(d,function(b){b.status==="success"?(a=!0,typeof ZCOM.Loader!="undefined"&&ZCOM.Loader.fire("ZCOM_XHR_INIT"),i&&setTimeout(i,0),ZCOM.Ifpc.sendToTarget(d,"zcom.xhr.configure",ZCOM.Ifpc.pack({serverProxyUrl:f}))):console.log("Failed to connect to XHR.html: "+b.data)},128e3)})}))}function g(a,c,d,g){var h=e(d,!0),i=f(d),j=e(location.href,!0),k=f(location.href);if(e(a,!0)!==h||f(a)!==i)throw"[xhr.js]: xhr.html page should reside on the same domain as the server proxy page's.";b=h===j&&i===k;if(!b&&(e(c,!0)!==h||f(c)!==i))throw"[xhr.js]: the server side xd page should reside on the same domain as the server proxy page's.";if(!b&&(e(g,!0)!==j||f(g)!==i))throw"[xhr.js]: the local xd page should reside on the same domain as the current page's."}function f(a){if(!a)return"http";a=a.toLowerCase();var b=a.indexOf("://"),c=b!==-1?a.substring(0,b):"http";return c}function e(a,b){if(!a)return"";a=a.indexOf("://")===-1?location.href:a,a=a.toLowerCase();var c=a.indexOf("://");a=a.substring(c+3),c=a.indexOf("/"),a=c===-1?a:a.substring(0,c);if(!b)return a;c=a.indexOf(":");var d=c===-1?"80":a.substring(c+1);a=c===-1?a:a.substring(0,c);var e=a.split("."),f={aero:1,asia:1,biz:1,cat:1,com:1,coop:1,edu:1,gov:1,info:1,"int":1,jobs:1,mil:1,mobi:1,museum:1,name:1,net:1,org:1,pro:1,tel:1,travel:1,xxx:1},g=[],h=!1,i=!1,j=!1;while(e.length>0){var k=e.pop();if(!h&&!i){h=!!f[k],i=k.length===2;if(h||i)g.unshift(k);else break}else{if(h&&!i){g.unshift(k),j=!0;break}if(!h&&i){h=!!f[k],g.unshift(k);if(!h){j=!0;break}}else if(h&&i){g.unshift(k),j=!0;break}}}g=j?g.join("."):"";return g?d?g+":"+d:g:""}var a=!1,b=!1,c=!1,d;return{init:i,uninit:j,request:k,supportCors:function(){return c}}}(),define("common/xhr/xhr",function(){});if(typeof window.DAPI=="undefined")throw"Attempting to import DAPI.api without DAPI defined.";if(typeof DAPI.api!="undefined")throw"Attempting to import DAPI.api twice.";DAPI.api=function(a){function z(a,f,g,h,i){e[a]={bypassCache:q(f)?f:b,expireTime:q(g)?g:c,deferTime:q(h)?h:d,handler:q(i)?i:null}}function y(b,c,d,e,f,g,h,i,p){j=f,k=g,l=h,m=i||o,n=p,typeof Crypto=="undefined"||typeof Crypto.SHA1=="undefined"?require({context:"dapi"},["lib/cryptojs/cryptojs"],function(){ZCOM.Loader.fire("LIB_CRYPTOJS_LOAD")}):ZCOM.Loader.fire("LIB_CRYPTOJS_LOAD"),typeof JSON=="undefined"?require({context:"dapi"},["lib/json2"],function(){ZCOM.Loader.fire("LIB_JSON_LOAD")}):ZCOM.Loader.fire("LIB_JSON_LOAD"),typeof a.Cache=="undefined"?require({context:"dapi"},["cache"],function(){ZCOM.Loader.fire("DAPI_CACHE_LOAD")}):ZCOM.Loader.fire("DAPI_CACHE_LOAD"),typeof ZCOM.Ifpc=="undefined"?require({context:"dapi"},["common/ifpc/ifpc"],function(){ZCOM.Loader.fire("ZCOM_IFPC_LOAD"),ZCOM.Ifpc.init({subframes:{xdReceiverUrl:e}})}):(ZCOM.Loader.fire("ZCOM_IFPC_LOAD"),ZCOM.Ifpc.init({subframes:{xdReceiverUrl:e}})),typeof ZCOM.Xhr=="undefined"?require({context:"dapi"},["common/xhr/xhr"],function(){ZCOM.Loader.fire("ZCOM_XHR_LOAD"),ZCOM.Xhr.init(b,c,d,e)}):(ZCOM.Loader.fire("ZCOM_XHR_LOAD"),ZCOM.Xhr.init(b,c,d,e)),ZCOM.Loader.wait(["DAPI_CACHE_LOAD"],function(){a.Cache.init(JSON.stringify(a.getSessionKey())+f+h)}),ZCOM.Loader.wait(["LIB_JSON_LOAD","LIB_CRYPTOJS_LOAD","ZCOM_IFPC_INIT","ZCOM_XHR_INIT","DAPI_CACHE_INIT"],function(){window.ActiveXObject?window.onbeforeunload=function(){v(!0,!0)}:a.getPriv().jQuery(window).bind("beforeunload",function(){v(!0,!0)}),n=n&&ZCOM.Xhr.supportCors()==="HTML5",ZCOM.Loader.fire("DAPI_API_INIT")})}function x(){v(!0)}function w(a){function h(){}var c=(new Date).getTime();p(a)||(a=[a]);for(var i=0;i<a.length;++i){var j=a[i];if(!j.method||!j.payload)continue;j.callback=j.callback||h;var k;e[j.method]?e[j.method].bypassCache?k=!0:k=q(j.bypassCache)?j.bypassCache:e[j.method].bypassCache:b?k=!0:k=q(j.bypassCache)?j.bypassCache:b,j.bypassCache=k,j.deferTime=q(j.deferTime)?j.deferTime:e[j.method]?e[j.method].deferTime:d,j.deferTime=c+j.deferTime*1e3,f.push(j)}f.sort(function(a,b){return a.deferTime-b.deferTime}),clearTimeout(g),g=f[0]&&setTimeout(v,Math.max(f[0].deferTime-c,0))}function v(b,c){function k(a,b){setTimeout(function(){a(JSON.parse(b))},0)}clearTimeout(g);var d=(new Date).getTime(),h=[],i=null,j="";b=!0;while(f.length>0&&(b||f[0].deferTime<=d))i=f.shift(),j=i.bypassCache?null:a.Cache.get(i.method,JSON.stringify(i.payload)),j===null?h.push(i):k(t(i,d,!0),j);f.length>0&&(g=setTimeout(v,Math.max(f[0].deferTime-d,0)));var l=[];while(h.length>0)i=h.shift(),e[i.method]&&e[i.method].handler?e[i.method].handler(i.method,i.payload,t(i,d,!1),c):l.push(i);if(l.length!==0)if(l.length===1)r(l[0].method,l[0].payload,t(l[0],d,!1),c);else{var m=[],n={calls:[]};for(var o=0;o<l.length;++o)m.push(t(l[o],d,!1)),n.calls.push({method:l[o].method,args:l[o].payload});r("batch.multiCall",n,u(m),c)}}function u(a){return function(b){var c;if(b.result==="failure")for(c=0;c<a.length;++c)a[c]({result:"failure",error:b.msg});else{b=b.data;for(c=0;c<a.length;++c)a[c](b[c])}}}function t(d,f,g){return function(h){var i=(new Date).getTime();s(d.method)&&!1&&console.log("[Track Info]: method",d.method,"payload",d.payload,"bypassCache",d.bypassCache,"deferTime",d.deferTime,"start",f,"hitCache",g,"responseText",JSON.stringify(h),"duration",i-f),!g&&(e[d.method]&&!e[d.method].bypassCache||!e[d.method]&&!b)&&h.result!=="failure"&&a.Cache.set(d.method,JSON.stringify(d.payload),JSON.stringify(h),e[d.method]&&e[d.method].expireTime||c),h.result!=="failure"?d.callback(h.data,h):d.callback({error:h.msg},h)}}function s(a){var b=a.indexOf("track");return b!==0&&b!==1}function r(b,c,d,e){i++;var f={a:b,al:JSON.stringify(c),id:i,ai:j,sn:l},g=b.split(".");g=g[0];var h=m;n&&g!=="batch"&&(h=m.replace("//api","//"+g+".api"));var o=a.getSessionKey(),p="v=1.1";o&&(f.us=JSON.stringify(o),f.u=k),p+="&p="+encodeURIComponent(JSON.stringify(f)),ZCOM.Xhr.request("POST",h,p,null,function(a){d(JSON.parse(a))},function(a,b){d({result:"failure",msg:b})},e)}function q(a){return typeof a!="undefined"&&a!==null}function p(a){return Object.prototype.toString.call(a)==="[object Array]"}var b=!0,c=900,d=0,e={},f=[],g=null,h=null,i=0,j=null,k=null,l=null,m="",n=!1,o="http://rest.zynga.com";return{init:y,send:w,flush:x,configMethod:z}}(DAPI),define("api",function(){});if(typeof window.DAPI=="undefined")throw"Attempting to import DAPI.api without DAPI defined.";if(typeof DAPI.ui!="undefined")throw"Attempting to import DAPI.ui twice.";DAPI.ui=function(a){function p(a,c,d){b?o(a,c,d):(_loadDAPIUIDepedencies(),ZCOM.Loader.wait(["DAPI_IFPC_INIT","LIB_JSON_LOAD"],function(){n(),o(a,c,d)}))}function o(a,b,c){var d=c||function(){},e=b||{};if(typeof a=="undefined")throw"Required param methodName is missing";if(!m.hasOwnProperty(a))throw"Unsupported UI method requested "+a;m[a](b,c);return}function n(){var d=a.getPriv(),e=null;e=d.initParam.urls,c=d.initParam.auth.snid==g?!0:!1,h=d.jQuery,b=!0}function l(a,b,d){if(!c)d("Implicit");else{var e=JSON.stringify({method:a,params:b});ZCOM.Loader.wait(["ZCOM_IFPC_INIT"],function(){ZCOM.Ifpc.send("canvasRequest",e),d("Implicit")})}}function k(a){function b(){var a=Math.max(h(document).height(),h(window).height(),h("body").innerHeight(),h("body").outerHeight());a!=f&&(f=a,j(f))}!c||(typeof a=="number"?a={onOrOff:!0,interval:a}:typeof a!="object"&&(a={onOrOff:a,interval:d}),a.onOrOff===undefined&&(a.onOrOff=e!==null),a.interval===undefined&&(a.interval=d),d!=a.interval&&(d=a.interval,e!==null&&(window.clearInterval(e),e=null)),a.onOrOff&&e===null?(b(),e=window.setInterval(b,d)):!a.onOrOff&&e!==null&&(window.clearInterval(e),e=null))}function j(a){i("resize",[a]),f=a}function i(a,b){if(!!c){var d=JSON.stringify({method:a,params:b});ZCOM.Loader.wait(["ZCOM_IFPC_INIT"],function(){ZCOM.Ifpc.send("onReceiverLoaded",d)})}}var b=!1,c=!1,d=1e3,e=null,f=-1,g="18",h=null,m={setResizeEnabled:function(a,b){var c=b||function(){};k(a),c(!0)},setSize:function(a,b){var c=b||function(){};typeof a.height!==undefined&&(j(a.height),c(!0)),c(!1)},setHeight:function(a,b){var c=b||function(){};if(typeof a!="undefined"||typeof a.height!="undefined"){var d=a.hasOwnProperty("height")?a.height:a;j(d),c(!0)}c(!1)},showBookmarkDialog:function(a,b){b&&b(!0)},requireSession:function(a,b){b&&b(!1)},createJSDialog:function(a){var b=a.title,c=a.body,d=a.category,e={modal:!0,width:300,height:100};i("showDialog",[b,c,e,d])},resetTheTimer:function(a){var b=a.onOrOff;i("resetTimer",[b])},showFriendingDialog:function(a,b){l("friendingDialog",[],b)},showProfileDialog:function(a,b){l("profileDialog",[],b)},sendCanvasRequest:function(a,b){l(a.method,a.param,b)},confirmPost:function(a,b){var c=a.body,d=a.img;i("confirmPost",[c,d])},checkSession:function(){i("checkSession",[])}};return p}(DAPI),define("ui",function(){}),typeof window.DAPI=="undefined"&&(window.DAPI={}),typeof window.console=="undefined"&&(window.console={log:function(){}});if(!1)require({context:"dapi"},["def"]);(function(){function d(){function b(){var b=a.initParam.urls,c=a.initParam.auth;b.server=b.server||"//api.zynga.com/",b.server_xhr=b.server_xhr||b.server+"/common/xhr/xhr.html",b.server_xd=b.server_xd||b.server+"/common/ifpc/xd_receiver.html",b.server_proxy=b.server_proxy||b.server+"/proxy.html",b.is_partition=b.is_partition||!1,DAPI.api.init(b.server_xhr,b.server_xd,b.server_proxy,b.local_xd,c.appId,c.zid,c.snid,b.server,b.is_partition),ZCOM.Loader.fire("DAPI_FUNCTIONS_LOAD")}ZCOM.Loader.wait(["DAPI_CORE_LOAD","DOM_LOAD"],function(){typeof DAPI.api=="undefined"||typeof DAPI.ui=="undefined"?require({context:"dapi"},["api","ui"],function(){b()}):b()})}function c(){function e(){ZCOM.Loader.fire("DAPI_CORE_LOAD"),b(document).ready(function(){ZCOM.Loader.fire("DOM_LOAD")}),ZCOM.Loader.wait(["DAPI_API_INIT"],function(){a.inited=!0;for(var b=0;b<a.onInit.length;++b)setTimeout(a.onInit[b],0)}),d()}typeof a.jQuery=="undefined"&&typeof jQuery!="undefined"&&(a.jQuery=jQuery,jQuery.noConflict(!0));var b=a.jQuery,c=require;c({context:"dapi",baseUrl:a.initParam.urls.js,waitSeconds:60}),typeof ZCOM=="undefined"||typeof ZCOM.Loader=="undefined"?require({context:"dapi"},["common/loader"],function(){e()}):e()}function b(a,b){function d(a){var c=a.currentTarget||a.srcElement;if(a.type==="load"||c.readyState==="complete"||c.readyState==="loaded")c.removeEventListener?c.removeEventListener("load",d,!1):c.detachEvent("onreadystatechange",d),b()}var c=document.createElement("script");b=b||function(){},c.async=!0,c.addEventListener?c.addEventListener("load",d,!1):c.attachEvent("onreadystatechange",d),c.src=a;var e=document.getElementsByTagName("body")[0]?document.getElementsByTagName("body")[0]:document.getElementsByTagName("head")[0];e.appendChild(c)}var a={};a.onInit=[],a.inited=!1,DAPI.getPriv=function(){return a},DAPI.isTop=function(){return a.initParam.auth.snid==21?window.name=="bootFrame":!0},DAPI.getCurrentUser=function(){return a.initParam.auth.hasOwnProperty("zid")?a.initParam.auth.zid:null},DAPI.getSessionKey=function(){return a.initParam.auth.hasOwnProperty("sessionKey")?a.initParam.auth.sessionKey:null},DAPI.setSessionKey=function(b){a.initParam.auth.sessionKey=b},DAPI.onInit=function(b){a.inited?setTimeout(b,0):a.onInit.push(b)},DAPI.init=function(d){a.initParam=d;var e=d.urls.js;typeof require!="undefined"?(a.jQuery=d.jQuery,c()):b(e+"/lib/require-jquery.js",c)}})(),define("dapi",function(){})